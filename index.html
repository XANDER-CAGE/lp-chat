<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Socket.IO Client</title>
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
<script>
  const chatId = "677fdde59d482c75243d109f";
  // const consultId = "ee7b97e2-6bee-4d06-b5c6-e2de644f44eb";
  const jwt =
    "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY3MmIzYjJkYTQ4MDg5MWNhYjdlMTY3NyIsImlzX3ZlcmlmaWVkIjpmYWxzZSwiY3JlYXRlZF9hdCI6IjIwMjQtMTEtMDZUMDk6NDc6MjUuMTg4WiIsInJvbGUiOiJ1c2VyIiwiaXNfZGVsZXRlZCI6ZmFsc2UsImNyZWF0ZWRfYnkiOm51bGwsImxhbmciOm51bGwsInBob25lX251bWJlciI6Ijk5ODkwOTkyMzEyNiIsImZpcnN0X25hbWUiOm51bGwsImxhc3RfbmFtZSI6bnVsbCwiYmlydGhfZGF0ZSI6bnVsbCwiZmlsZV9wYXRoIjpudWxsLCJ2ZXJpZmljYXRpb25fYXR0ZW1wdCI6IjEiLCJibG9ja2VkX2F0IjpudWxsLCJhdHRlbXB0X2NvdW50IjowLCJnZW5kZXIiOm51bGwsImJsb29kX2dyb3VwX2lkIjpudWxsLCJwYXNzd29yZCI6IiQyYiQxMCRrdFp4Q0dheldiVUVpSWJBZzJ3UzZPdkRpMDZWL2QydndPdlhJWnZ1U2lKZHhTMkJLSzNIMiIsImlhdCI6MTczMDg4NjQ3OH0.jxXgva6skpliWDcmcaiFc3kfbTe_Vwto5QqQ9CCnjqM";

  // const socket = io("http://localhost:3000", {
  //   extraHeaders: {
  //     authorization: jwt,  // Correct way to send the JWT in Socket.IO
  //   },
  //   query: {
  //     chatId: chatId,
  //
  //   }
  // });

  socket.on("connection", (so) => {
    so.join(chatId);
    so.on('chat', function(data) {
      console.log(data, 'ishladi');
    });
  });

  // Listen to disconnect event
  socket.on('disconnect', (er) => {
    console.log('Disconnected from server', er);
  });

  // Listen to connection event
  socket.on('connect', () => {
    console.log('Connected to server');
  });

  // Listen to messages for the specific room (consultId)
  socket.on('chat', (message) => {
    console.log(`Message from room "${consultId}":`, message);
  });
</script>
</body>
</html>
